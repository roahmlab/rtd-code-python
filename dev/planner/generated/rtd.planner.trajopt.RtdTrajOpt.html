<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>rtd.planner.trajopt.RtdTrajOpt &mdash; RTD-code Python (development) v0.0.1-dev</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/katex-math.css?v=91adb8b6" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=d40ce7ee"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Example RTD Planner Implementation of ARMOUR" href="../armour.html" />
    <link rel="prev" title="rtd.planner.trajopt.ScipyOptimizationEngine" href="rtd.planner.trajopt.ScipyOptimizationEngine.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            RTD-code Python (development)
          </a>
              <div class="version">
                0.0.1-dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup.html">Setup Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../planner.html">Planner Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../rtd.html">RTD Planner Interfaces and Base Classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../rtd.html#the-rtd-planner">The RTD Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rtd.html#module-rtd.planner.reachsets">Reachable Sets Generation Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rtd.html#module-rtd.planner.trajectory">Trajectory Interfaces</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../rtd.html#module-rtd.planner.trajopt">Trajectory Optimization Interfaces &amp; Components</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="rtd.planner.trajopt.TrajOptProps.html">rtd.planner.trajopt.TrajOptProps</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtd.planner.trajopt.Objective.html">rtd.planner.trajopt.Objective</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtd.planner.trajopt.GenericArmObjective.html">rtd.planner.trajopt.GenericArmObjective</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtd.planner.trajopt.OptimizationEngine.html">rtd.planner.trajopt.OptimizationEngine</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtd.planner.trajopt.ScipyOptimizationEngine.html">rtd.planner.trajopt.ScipyOptimizationEngine</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">rtd.planner.trajopt.RtdTrajOpt</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../armour.html">Example RTD Planner Implementation of ARMOUR</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../simulation/simulation.html">Simulation Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils/utils.html">RTD Code Utilities Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RTD-code Python (development)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../planner.html">Planner Reference</a></li>
          <li class="breadcrumb-item"><a href="../rtd.html">RTD Planner Interfaces and Base Classes</a></li>
      <li class="breadcrumb-item active">rtd.planner.trajopt.RtdTrajOpt</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/planner/generated/rtd.planner.trajopt.RtdTrajOpt.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rtd-planner-trajopt-rtdtrajopt">
<h1>rtd.planner.trajopt.RtdTrajOpt<a class="headerlink" href="#rtd-planner-trajopt-rtdtrajopt" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="rtd.planner.trajopt.RtdTrajOpt">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rtd.planner.trajopt.</span></span><span class="sig-name descname"><span class="pre">RtdTrajOpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">trajOptProps:</span> <span class="pre">~rtd.planner.trajopt.TrajOptProps.TrajOptProps,</span> <span class="pre">reachableSets:</span> <span class="pre">dict[str,</span> <span class="pre">rtd.planner.reachsets.ReachSetGenerator.ReachSetGenerator],</span> <span class="pre">objective:</span> <span class="pre">~rtd.planner.trajopt.Objective.Objective,</span> <span class="pre">optimizationEngine:</span> <span class="pre">~rtd.planner.trajopt.OptimizationEngine.OptimizationEngine,</span> <span class="pre">trajectoryFactory:</span> <span class="pre">&lt;module</span> <span class="pre">'rtd.planner.trajectory.TrajectoryFactory'</span> <span class="pre">from</span> <span class="pre">'/rtd/rtd/planner/trajectory/TrajectoryFactory.py'&gt;,</span> <span class="pre">**options</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/rtd/planner/trajopt/RtdTrajOpt.html#RtdTrajOpt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rtd.planner.trajopt.RtdTrajOpt" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Core trajectory optimization routine for RTD</p>
<p>This object handles the necessary calls to perform the actual trajectory
optimization when requested. It calls the generators for the reachble
sets and combines all the resulting nonlinear constraints in the end</p>
<dl class="py method">
<dt class="sig sig-object py" id="rtd.planner.trajopt.RtdTrajOpt.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">trajOptProps:</span> <span class="pre">~rtd.planner.trajopt.TrajOptProps.TrajOptProps,</span> <span class="pre">reachableSets:</span> <span class="pre">dict[str,</span> <span class="pre">rtd.planner.reachsets.ReachSetGenerator.ReachSetGenerator],</span> <span class="pre">objective:</span> <span class="pre">~rtd.planner.trajopt.Objective.Objective,</span> <span class="pre">optimizationEngine:</span> <span class="pre">~rtd.planner.trajopt.OptimizationEngine.OptimizationEngine,</span> <span class="pre">trajectoryFactory:</span> <span class="pre">&lt;module</span> <span class="pre">'rtd.planner.trajectory.TrajectoryFactory'</span> <span class="pre">from</span> <span class="pre">'/rtd/rtd/planner/trajectory/TrajectoryFactory.py'&gt;,</span> <span class="pre">**options</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/rtd/planner/trajopt/RtdTrajOpt.html#RtdTrajOpt.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rtd.planner.trajopt.RtdTrajOpt.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Construct the RtdTrajOpt object.</p>
<p>Store all the handles to objects that we want to use.
This should encapsulate the main trajectory optimization
aspection of RTD &amp; ideally need very little specialization
between versions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trajOptProps</strong> – TrajOptProps</p></li>
<li><p><strong>reachableSets</strong> – dict[str, ReachSetGenerator]</p></li>
<li><p><strong>objective</strong> – Objective</p></li>
<li><p><strong>optimizationEngine</strong> – OptimizationEngine</p></li>
<li><p><strong>trajectoryFactory</strong> – TrajectoryFactory</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code>(trajOptProps, reachableSets, ...)</p></td>
<td><p>Construct the RtdTrajOpt object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">solveTrajOpt</span></code>(robotState, worldState, waypoint)</p></td>
<td><p>Execute the solver for trajectory optimization</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="rtd.planner.trajopt.RtdTrajOpt.merge_constraints">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">merge_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nlconCallbacks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/rtd/planner/trajopt/RtdTrajOpt.html#RtdTrajOpt.merge_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rtd.planner.trajopt.RtdTrajOpt.merge_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A functor for computing the constraints
for a given input, with lookup for speed
optimizations</p>
<dl class="py method">
<dt class="sig sig-object py" id="rtd.planner.trajopt.RtdTrajOpt.merge_constraints.findBuffer">
<span class="sig-name descname"><span class="pre">findBuffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><span class="pre">tuple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../../_modules/rtd/planner/trajopt/RtdTrajOpt.html#RtdTrajOpt.merge_constraints.findBuffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rtd.planner.trajopt.RtdTrajOpt.merge_constraints.findBuffer" title="Permalink to this definition"></a></dt>
<dd><p>Return output if result for given input
exists in the buffer, otherwise return
None</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rtd.planner.trajopt.RtdTrajOpt.merge_constraints.updateBuffer">
<span class="sig-name descname"><span class="pre">updateBuffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/rtd/planner/trajopt/RtdTrajOpt.html#RtdTrajOpt.merge_constraints.updateBuffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rtd.planner.trajopt.RtdTrajOpt.merge_constraints.updateBuffer" title="Permalink to this definition"></a></dt>
<dd><p>Ensure buffer size &lt; buffer_size and add
input-output pair into buffer</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rtd.planner.trajopt.RtdTrajOpt.solveTrajOpt">
<span class="sig-name descname"><span class="pre">solveTrajOpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">robotState:</span> <span class="pre">~rtd.entity.states.EntityState.EntityState,</span> <span class="pre">worldState:</span> <span class="pre">~rtd.sim.world.WorldState.WorldState,</span> <span class="pre">waypoint,</span> <span class="pre">initialGuess:</span> <span class="pre">&lt;module</span> <span class="pre">'rtd.planner.trajectory.Trajectory'</span> <span class="pre">from</span> <span class="pre">'/rtd/rtd/planner/trajectory/Trajectory.py'&gt;</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**rsAdditionalArgs:</span> <span class="pre">dict[dict]</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple[&lt;module</span> <span class="pre">'rtd.planner.trajectory.Trajectory'</span> <span class="pre">from</span> <span class="pre">'/rtd/rtd/planner/trajectory/Trajectory.py'&gt;,</span> <span class="pre">float,</span> <span class="pre">dict]</span></span></span><a class="reference internal" href="../../_modules/rtd/planner/trajopt/RtdTrajOpt.html#RtdTrajOpt.solveTrajOpt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rtd.planner.trajopt.RtdTrajOpt.solveTrajOpt" title="Permalink to this definition"></a></dt>
<dd><p>Execute the solver for trajectory optimization</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned <cite>info</cite> dict has the following entries:
worldState, robotState, rsInstances, nlconCallbacks,
objectiveCallback, waypoint, bounds, num_parameters, guess,
trajectory, cost</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>robotState</strong> – EntityState: State of the robot.</p></li>
<li><p><strong>worldState</strong> – WorldState: Observed state of the world for the reachable sets</p></li>
<li><p><strong>waypoint</strong> – Waypoint we want to optimize to</p></li>
<li><p><strong>initialGuess</strong> – Trajectory: Past trajectory to use as an initial guess</p></li>
<li><p><strong>rsAdditionalArgs</strong> – additional arguments to pass to the reachable sets, by set name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Trajectory, cost: float, info: dict):
<cite>trajectory</cite> is an instance of the trajectory object that
corresponds to the solved trajectory optimization. If it
wasn’t successful, this will either be an invalid
trajectory or empty. <cite>cost</cite> is the final cost of the
objective used. <cite>info</cite> is a dict of optimization data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(trajectory</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rtd.planner.trajopt.ScipyOptimizationEngine.html" class="btn btn-neutral float-left" title="rtd.planner.trajopt.ScipyOptimizationEngine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../armour.html" class="btn btn-neutral float-right" title="Example RTD Planner Implementation of ARMOUR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, ROAHM Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>